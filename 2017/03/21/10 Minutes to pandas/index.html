<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="python,data mining,machine learning,NLP">
    

    <!--Author-->
    
        <meta name="author" content="mimizhang">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="10 Minutes to pandas"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="python,data mining,machine learning,NLP" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="MIMI&#39;s BLOG"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>10 Minutes to pandas - MIMI&#39;s BLOG</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">MIMI's BLOG</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/mimizhang">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/img/picjumbo.com_HNCK9540.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>10 Minutes to pandas</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        2017-03-21
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/python/">#python</a> <a href="/tags/pandas/">#pandas</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                        

<a href="/categories/Python/">Python</a>

                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p><strong>pandas</strong>官方入门教程：<a href="http://pandas.pydata.org/pandas-docs/stable/10min.html" target="_blank" rel="external">10 Minutes to pandas</a></p>
<p>下面的操作依赖于这些包，所以操作之前要引入这些包</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div></pre></td></tr></table></figure>
<h2 id="1-Object-Creation-创建对象"><a href="#1-Object-Creation-创建对象" class="headerlink" title="1. Object Creation 创建对象"></a>1. Object Creation 创建对象</h2><ol>
<li><p>将数组转换为<strong><code>Series</code></strong>对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">4</span>]: s = pd.Series([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,np.nan,<span class="number">6</span>,<span class="number">8</span>])</div><div class="line"></div><div class="line">In [<span class="number">5</span>]: s</div><div class="line">Out[<span class="number">5</span>]: </div><div class="line"><span class="number">0</span>    <span class="number">1.0</span></div><div class="line"><span class="number">1</span>    <span class="number">3.0</span></div><div class="line"><span class="number">2</span>    <span class="number">5.0</span></div><div class="line"><span class="number">3</span>    NaN</div><div class="line"><span class="number">4</span>    <span class="number">6.0</span></div><div class="line"><span class="number">5</span>    <span class="number">8.0</span></div><div class="line">dtype: float64</div></pre></td></tr></table></figure>
</li>
<li><p>将<strong><code>numpy</code></strong>数组转换为<strong><code>DataFrame</code></strong></p>
<ul>
<li><p><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.date_range.html" target="_blank" rel="external"><strong>pandas.date_range</strong></a></p>
<p>创建一个<code>datetime index</code>，起始时间为20170320，时间跨度为7天，默认的<code>freq</code>为<code>&#39;D&#39;</code>。如果没有<code>periods</code>参数则必须指定结束时间<code>end</code>。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">6</span>]: dates = pd.date_range(<span class="string">'20170320'</span>, periods=<span class="number">7</span>)</div><div class="line"></div><div class="line">In [<span class="number">7</span>]: dates</div><div class="line">Out[<span class="number">7</span>]: </div><div class="line">DatetimeIndex([<span class="string">'2017-03-20'</span>, <span class="string">'2017-03-21'</span>, <span class="string">'2017-03-22'</span>, <span class="string">'2017-03-23'</span>,</div><div class="line">               <span class="string">'2017-03-24'</span>, <span class="string">'2017-03-25'</span>, <span class="string">'2017-03-26'</span>, <span class="string">'2017-03-27'</span>],</div><div class="line">              dtype=<span class="string">'datetime64[ns]'</span>, freq=<span class="string">'D'</span>)</div><div class="line"></div><div class="line">In [<span class="number">8</span>]: dates = pd.date_range(<span class="string">'20170320'</span>,<span class="string">'20170327'</span>)</div><div class="line">In [<span class="number">9</span>]: dates</div><div class="line">Out[<span class="number">9</span>]: </div><div class="line">DatetimeIndex([<span class="string">'2017-03-20'</span>, <span class="string">'2017-03-21'</span>, <span class="string">'2017-03-22'</span>, <span class="string">'2017-03-23'</span>,</div><div class="line">               <span class="string">'2017-03-24'</span>, <span class="string">'2017-03-25'</span>, <span class="string">'2017-03-26'</span>, <span class="string">'2017-03-27'</span>],</div><div class="line">              dtype=<span class="string">'datetime64[ns]'</span>, freq=<span class="string">'D'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 更改freq</span></div><div class="line">In[<span class="number">10</span>]: dates = pd.date_range(<span class="string">'20170320'</span>, periods=<span class="number">4</span>,freq=<span class="string">'w-mon'</span>)</div><div class="line">In[<span class="number">11</span>]: dates</div><div class="line">Out[<span class="number">11</span>]: </div><div class="line">DatetimeIndex([<span class="string">'2017-03-20'</span>, <span class="string">'2017-03-27'</span>, <span class="string">'2017-04-03'</span>, <span class="string">'2017-04-10'</span>], dtype=<span class="string">'datetime64[ns]'</span>, freq=<span class="string">'W-MON'</span>)</div></pre></td></tr></table></figure>
<ul>
<li><p><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.randn.html" target="_blank" rel="external"><strong>np.random.randn</strong></a></p>
<p><code>np.random.randn(4,4)</code>生成一个<code>numpy</code>4*4的数组，其中的每一个数服从正态分布。</p>
</li>
<li><p>index=dates 将dates指定为index。</p>
</li>
<li><p>columns指定列名称</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">86</span>]: df = pd.DataFrame(np.random.randn(<span class="number">4</span>,<span class="number">4</span>), index=dates, columns=list(<span class="string">'ABCD'</span>))</div><div class="line">In[<span class="number">87</span>]: df</div><div class="line">Out[<span class="number">87</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div></pre></td></tr></table></figure>
</li>
<li><p>将字典对象转换成<code>DataFrame</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">88</span>]: df2 = pd.DataFrame(&#123; <span class="string">'A'</span> : <span class="number">1.</span>,</div><div class="line">   ....:                      <span class="string">'B'</span> : pd.Timestamp(<span class="string">'20130102'</span>),</div><div class="line">   ....:                      <span class="string">'C'</span> : pd.Series(<span class="number">1</span>,index=list(range(<span class="number">4</span>)),dtype=<span class="string">'float32'</span>),</div><div class="line">   ....:                      <span class="string">'D'</span> : np.array([<span class="number">3</span>] * <span class="number">4</span>,dtype=<span class="string">'int32'</span>),</div><div class="line">   ....:                      <span class="string">'E'</span> : pd.Categorical([<span class="string">"test"</span>,<span class="string">"train"</span>,<span class="string">"test"</span>,<span class="string">"train"</span>]),</div><div class="line">   ....:                      <span class="string">'F'</span> : <span class="string">'foo'</span> &#125;)</div><div class="line">In[<span class="number">89</span>]: df2</div><div class="line">Out[<span class="number">89</span>]: </div><div class="line"></div><div class="line">     A          B    C  D      E    F</div><div class="line"><span class="number">0</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>   test  foo</div><div class="line"><span class="number">1</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>  train  foo</div><div class="line"><span class="number">2</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>   test  foo</div><div class="line"><span class="number">3</span>  <span class="number">1.0</span> <span class="number">2013</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">1.0</span>  <span class="number">3</span>  train  foo</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="2-Viewing-Data-查看数据"><a href="#2-Viewing-Data-查看数据" class="headerlink" title="2. Viewing Data 查看数据"></a>2. Viewing Data 查看数据</h2><ol>
<li><p><strong>dtypes</strong> 查看各列的数据类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">94</span>]: df2.dtypes</div><div class="line">Out[<span class="number">94</span>]: </div><div class="line"></div><div class="line">A     float64</div><div class="line">B       int64</div><div class="line">C     float32</div><div class="line">D       int32</div><div class="line">E    category</div><div class="line">F      object</div><div class="line">dtype: object</div><div class="line">   </div><div class="line">In[<span class="number">96</span>]: df[<span class="string">'A'</span>].dtype</div><div class="line">Out[<span class="number">96</span>]: </div><div class="line">dtype(<span class="string">'float64'</span>)</div></pre></td></tr></table></figure>
</li>
<li><p><strong>head(),tail()</strong>,查看数据框头几行和最后几行的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">97</span>]: df.head()</div><div class="line">Out[<span class="number">97</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div><div class="line">In[<span class="number">98</span>]: df.tail(<span class="number">2</span>)</div><div class="line">Out[<span class="number">98</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div></pre></td></tr></table></figure>
</li>
<li><p>查看索引<strong>df.index</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">99</span>]: df.index</div><div class="line">Out[<span class="number">99</span>]: </div><div class="line">DatetimeIndex([<span class="string">'2017-03-20'</span>, <span class="string">'2017-03-27'</span>, <span class="string">'2017-04-03'</span>, <span class="string">'2017-04-10'</span>], dtype=<span class="string">'datetime64[ns]'</span>, freq=<span class="string">'W-MON'</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>查看列<strong>df.colums</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">100</span>]: df.columns</div><div class="line">Out[<span class="number">100</span>]: </div><div class="line">Index([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>], dtype=<span class="string">'object'</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>查看这个DataFrame下的numpy data:<strong>df.values</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">101</span>]: df.values</div><div class="line">Out[<span class="number">101</span>]: </div><div class="line"></div><div class="line">array([[<span class="number">-0.27393096</span>,  <span class="number">1.46413903</span>,  <span class="number">0.5114613</span> ,  <span class="number">0.70707094</span>],</div><div class="line">       [ <span class="number">0.29052687</span>,  <span class="number">0.79957181</span>,  <span class="number">0.52614137</span>,  <span class="number">0.69645894</span>],</div><div class="line">       [ <span class="number">0.39017244</span>,  <span class="number">0.17137885</span>, <span class="number">-1.32174227</span>,  <span class="number">0.9413581</span> ],</div><div class="line">       [ <span class="number">0.9638237</span> , <span class="number">-1.08939135</span>,  <span class="number">0.13306936</span>,  <span class="number">1.00735588</span>]])</div></pre></td></tr></table></figure>
</li>
<li><p><strong>df.describe</strong>:给出这个数据框的statistic summary</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">102</span>]: df.describe()</div><div class="line">Out[<span class="number">102</span>]: </div><div class="line"></div><div class="line">              A         B         C         D</div><div class="line">count  <span class="number">4.000000</span>  <span class="number">4.000000</span>  <span class="number">4.000000</span>  <span class="number">4.000000</span></div><div class="line">mean   <span class="number">0.342648</span>  <span class="number">0.336425</span> <span class="number">-0.037768</span>  <span class="number">0.838061</span></div><div class="line">std    <span class="number">0.506953</span>  <span class="number">1.087265</span>  <span class="number">0.875104</span>  <span class="number">0.159730</span></div><div class="line">min   <span class="number">-0.273931</span> <span class="number">-1.089391</span> <span class="number">-1.321742</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">25</span>%    <span class="number">0.149412</span> <span class="number">-0.143814</span> <span class="number">-0.230634</span>  <span class="number">0.704418</span></div><div class="line"><span class="number">50</span>%    <span class="number">0.340350</span>  <span class="number">0.485475</span>  <span class="number">0.322265</span>  <span class="number">0.824215</span></div><div class="line"><span class="number">75</span>%    <span class="number">0.533585</span>  <span class="number">0.965714</span>  <span class="number">0.515131</span>  <span class="number">0.957858</span></div><div class="line">max    <span class="number">0.963824</span>  <span class="number">1.464139</span>  <span class="number">0.526141</span>  <span class="number">1.007356</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>df.T</strong>:转置矩阵，转置后index也随之改变</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">103</span>]: df.T</div><div class="line">Out[<span class="number">103</span>]: </div><div class="line"></div><div class="line">   <span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">2017</span><span class="number">-04</span><span class="number">-10</span></div><div class="line">A   <span class="number">-0.273931</span>    <span class="number">0.290527</span>    <span class="number">0.390172</span>    <span class="number">0.963824</span></div><div class="line">B    <span class="number">1.464139</span>    <span class="number">0.799572</span>    <span class="number">0.171379</span>   <span class="number">-1.089391</span></div><div class="line">C    <span class="number">0.511461</span>    <span class="number">0.526141</span>   <span class="number">-1.321742</span>    <span class="number">0.133069</span></div><div class="line">D    <span class="number">0.707071</span>    <span class="number">0.696459</span>    <span class="number">0.941358</span>    <span class="number">1.007356</span></div><div class="line">In[<span class="number">104</span>]: df.T.index</div><div class="line">Out[<span class="number">104</span>]: </div><div class="line">Index([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>], dtype=<span class="string">'object'</span>)</div></pre></td></tr></table></figure>
</li>
<li><p><strong>df.sort_index()</strong>:根据行列索引排序，默认axis=0，根据索引排序，当axis=1，根据列排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">119</span>]: df.sort_index(ascending=<span class="keyword">True</span>)</div><div class="line">Out[<span class="number">119</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div><div class="line">In[<span class="number">120</span>]: df.sort_index(ascending=<span class="keyword">False</span>)</div><div class="line">Out[<span class="number">120</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div><div class="line"></div><div class="line">In[<span class="number">122</span>]: df.sort_index(axis=<span class="number">1</span>, ascending=<span class="keyword">False</span>)</div><div class="line">Out[<span class="number">122</span>]: </div><div class="line"></div><div class="line">                   D         C         B         A</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.707071</span>  <span class="number">0.511461</span>  <span class="number">1.464139</span> <span class="number">-0.273931</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.696459</span>  <span class="number">0.526141</span>  <span class="number">0.799572</span>  <span class="number">0.290527</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.941358</span> <span class="number">-1.321742</span>  <span class="number">0.171379</span>  <span class="number">0.390172</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">1.007356</span>  <span class="number">0.133069</span> <span class="number">-1.089391</span>  <span class="number">0.963824</span></div><div class="line">In[<span class="number">123</span>]: df.sort_index(axis=<span class="number">1</span>, ascending=<span class="keyword">True</span>)</div><div class="line">Out[<span class="number">123</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>df.sort_values:</strong>根据值排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">124</span>]: df.sort_values(by=<span class="string">'A'</span>)</div><div class="line">Out[<span class="number">124</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div><div class="line">In[<span class="number">125</span>]: df.sort_values(by=<span class="string">'A'</span>,ascending=<span class="keyword">False</span>)</div><div class="line">Out[<span class="number">125</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.963824</span> <span class="number">-1.089391</span>  <span class="number">0.133069</span>  <span class="number">1.007356</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.390172</span>  <span class="number">0.171379</span> <span class="number">-1.321742</span>  <span class="number">0.941358</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.290527</span>  <span class="number">0.799572</span>  <span class="number">0.526141</span>  <span class="number">0.696459</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.273931</span>  <span class="number">1.464139</span>  <span class="number">0.511461</span>  <span class="number">0.707071</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="3-Selection"><a href="#3-Selection" class="headerlink" title="3. Selection"></a>3. Selection</h2><h4 id="3-1-Getting"><a href="#3-1-Getting" class="headerlink" title="3.1 Getting"></a>3.1 Getting</h4><ol>
<li><p><strong>df.A，df[‘A’]</strong>：将A列的数据取出，两者的作用是相同的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">10</span>]: df.A</div><div class="line">Out[<span class="number">10</span>]: </div><div class="line"></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>    <span class="number">0.387798</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>    <span class="number">0.221780</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>   <span class="number">-1.585317</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>    <span class="number">0.035160</span></div><div class="line">Freq: W-MON, Name: A, dtype: float64</div><div class="line">In[<span class="number">11</span>]: df[<span class="string">'A'</span>]</div><div class="line">Out[<span class="number">11</span>]: </div><div class="line"></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>    <span class="number">0.387798</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>    <span class="number">0.221780</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>   <span class="number">-1.585317</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>    <span class="number">0.035160</span></div><div class="line">Freq: W-MON, Name: A, dtype: float64</div></pre></td></tr></table></figure>
</li>
<li><p>按行取数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">12</span>]: df[<span class="number">0</span>:<span class="number">3</span>]</div><div class="line">Out[<span class="number">12</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"></div><div class="line">In[<span class="number">14</span>]: df[<span class="string">'2017-03-20'</span>:<span class="string">'2017-04-03'</span>]</div><div class="line">Out[<span class="number">14</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3-2-Selection-by-Label"><a href="#3-2-Selection-by-Label" class="headerlink" title="3.2 Selection by Label"></a>3.2 Selection by Label</h4><ol>
<li><p><strong>df.loc</strong>：按照索引和列取数据</p>
<p><strong>df.at</strong>：和df.loc类似，但是只能取一个元素的值，只取一个元素的值，at是更为快速的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">16</span>]: df.loc[<span class="string">'2017-03-20'</span>]</div><div class="line">Out[<span class="number">16</span>]: </div><div class="line"></div><div class="line">A    <span class="number">0.387798</span></div><div class="line">B   <span class="number">-0.058203</span></div><div class="line">C   <span class="number">-0.169525</span></div><div class="line">D   <span class="number">-0.612571</span></div><div class="line">Name: <span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>, dtype: float64</div><div class="line">                </div><div class="line">In[<span class="number">17</span>]: df.loc[dates[<span class="number">0</span>]]</div><div class="line">Out[<span class="number">17</span>]: </div><div class="line"></div><div class="line">A    <span class="number">0.387798</span></div><div class="line">B   <span class="number">-0.058203</span></div><div class="line">C   <span class="number">-0.169525</span></div><div class="line">D   <span class="number">-0.612571</span></div><div class="line">Name: <span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>, dtype: float64</div><div class="line">        </div><div class="line">In[<span class="number">34</span>]: df.loc[:,<span class="string">'A'</span>]</div><div class="line">Out[<span class="number">34</span>]: </div><div class="line"></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>    <span class="number">0.387798</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>    <span class="number">0.221780</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>   <span class="number">-1.585317</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>    <span class="number">0.035160</span></div><div class="line">Freq: W-MON, Name: A, dtype: float64</div><div class="line">          </div><div class="line">In[<span class="number">36</span>]: df.loc[dates[<span class="number">0</span>:<span class="number">3</span>],<span class="string">'A'</span>]</div><div class="line">Out[<span class="number">36</span>]: </div><div class="line"></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>    <span class="number">0.387798</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>    <span class="number">0.221780</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>   <span class="number">-1.585317</span></div><div class="line">Freq: W-MON, Name: A, dtype: float64</div><div class="line">            </div><div class="line">In[<span class="number">37</span>]: df.loc[dates[<span class="number">0</span>:<span class="number">3</span>],[<span class="string">'A'</span>,<span class="string">'B'</span>]]</div><div class="line">Out[<span class="number">37</span>]: </div><div class="line"></div><div class="line">                   A         B</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span></div><div class="line"></div><div class="line">In[<span class="number">39</span>]: df.loc[:,[<span class="string">'A'</span>,<span class="string">'B'</span>]]</div><div class="line">Out[<span class="number">39</span>]: </div><div class="line"></div><div class="line">                   A         B</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span></div><div class="line"></div><div class="line">In[<span class="number">74</span>]: df.at[dates[<span class="number">0</span>],<span class="string">'A'</span>]</div><div class="line">Out[<span class="number">74</span>]: </div><div class="line"><span class="number">0.38779782953047309</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3-3-Selection-by-Position"><a href="#3-3-Selection-by-Position" class="headerlink" title="3.3 Selection by Position"></a>3.3 Selection by Position</h4><ol>
<li><p><strong>df.iloc</strong>：根据位置取数据，类似于matlab里面的取矩阵的方法</p>
<p><strong>df.iat</strong>：和df.iloc类似，但是只能取一个元素的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">44</span>]: df.iloc[<span class="number">3</span>]</div><div class="line">Out[<span class="number">44</span>]: </div><div class="line"></div><div class="line">A    <span class="number">0.035160</span></div><div class="line">B    <span class="number">0.143292</span></div><div class="line">C    <span class="number">0.139537</span></div><div class="line">D   <span class="number">-0.823278</span></div><div class="line">Name: <span class="number">2017</span><span class="number">-04</span><span class="number">-10</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>, dtype: float64</div><div class="line">                </div><div class="line">In[<span class="number">47</span>]: df.iloc[<span class="number">2</span>:<span class="number">4</span>]</div><div class="line">Out[<span class="number">47</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span>  <span class="number">0.139537</span> <span class="number">-0.823278</span></div><div class="line"></div><div class="line">In[<span class="number">43</span>]: df.iloc[<span class="number">2</span>:<span class="number">4</span>,<span class="number">0</span>:<span class="number">2</span>]</div><div class="line">Out[<span class="number">43</span>]: </div><div class="line"></div><div class="line">                   A         B</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span></div><div class="line"></div><div class="line">In[<span class="number">49</span>]: df.iloc[:,<span class="number">2</span>:<span class="number">4</span>]</div><div class="line">Out[<span class="number">49</span>]: </div><div class="line"></div><div class="line">                   C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.139537</span> <span class="number">-0.823278</span></div><div class="line"></div><div class="line">In[<span class="number">50</span>]: df.iloc[<span class="number">3</span>,<span class="number">2</span>]</div><div class="line">Out[<span class="number">50</span>]: </div><div class="line"><span class="number">0.13953667147016041</span></div><div class="line"></div><div class="line">In[<span class="number">75</span>]: df.iat[<span class="number">0</span>,<span class="number">0</span>]</div><div class="line">Out[<span class="number">75</span>]: </div><div class="line"><span class="number">0.38779782953047309</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="3-4-Boolean-Indexing"><a href="#3-4-Boolean-Indexing" class="headerlink" title="3.4 Boolean Indexing"></a>3.4 Boolean Indexing</h4><ol>
<li><p>​</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">52</span>]: df[df.A &gt; <span class="number">0</span>]</div><div class="line">Out[<span class="number">52</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span>  <span class="number">0.139537</span> <span class="number">-0.823278</span></div><div class="line"></div><div class="line">In[<span class="number">53</span>]: df[df &gt; <span class="number">0</span>]</div><div class="line">Out[<span class="number">53</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span>       NaN       NaN       NaN</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span>       NaN  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>       NaN  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span>  <span class="number">0.139537</span>       NaN</div></pre></td></tr></table></figure>
</li>
<li><p><strong>isin()</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">67</span>]: df2 = df.copy()</div><div class="line">In[<span class="number">68</span>]: df2[<span class="string">'E'</span>] = [<span class="string">'one'</span>, <span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'three'</span>]</div><div class="line">In[<span class="number">69</span>]: df2</div><div class="line">Out[<span class="number">69</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D      E</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span>    one</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span>    one</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span>    two</div><div class="line"></div><div class="line">In[<span class="number">70</span>]: df2[<span class="string">'E'</span>].isin( [<span class="string">'one'</span>, <span class="string">'one'</span>,<span class="string">'two'</span>])</div><div class="line">Out[<span class="number">70</span>]: </div><div class="line"></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>     <span class="keyword">True</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>     <span class="keyword">True</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>     <span class="keyword">True</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>    <span class="keyword">False</span></div><div class="line">Freq: W-MON, Name: E, dtype: bool</div><div class="line">            </div><div class="line">In[<span class="number">71</span>]: df2[df2[<span class="string">'E'</span>].isin([<span class="string">'one'</span>, <span class="string">'one'</span>,<span class="string">'two'</span>])]</div><div class="line">Out[<span class="number">71</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D    E</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span>  one</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span>  one</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span>  two</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="4-Missing-Data"><a href="#4-Missing-Data" class="headerlink" title="4. Missing Data"></a>4. Missing Data</h2><p><strong>缺失值：NaN</strong></p>
<p><strong>df.reindex</strong>：重置索引，原先不存在的索引所对应的值为NaN</p>
<p><strong>df.dropna()</strong>：将缺失值删除</p>
<p><strong>df.fillna()</strong>：填充缺失值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">78</span>]: df.reindex(index=pd.date_range(<span class="string">'2017-03-27'</span>,periods=<span class="number">6</span>,freq=<span class="string">'W-MON'</span>))</div><div class="line">Out[<span class="number">78</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span>  <span class="number">0.139537</span> <span class="number">-0.823278</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-17</span>       NaN       NaN       NaN       NaN</div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-24</span>       NaN       NaN       NaN       NaN</div><div class="line"><span class="number">2017</span><span class="number">-05</span><span class="number">-01</span>       NaN       NaN       NaN       NaN</div><div class="line">In[<span class="number">79</span>]: df3 = df.reindex(index=pd.date_range(<span class="string">'2017-03-27'</span>,periods=<span class="number">6</span>,freq=<span class="string">'W-MON'</span>))</div><div class="line">In[<span class="number">80</span>]: df3.dropna(how=<span class="string">'any'</span>)</div><div class="line">Out[<span class="number">80</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span>  <span class="number">0.139537</span> <span class="number">-0.823278</span></div><div class="line">In[<span class="number">81</span>]: df3.fillna(value=<span class="number">1</span>)</div><div class="line">Out[<span class="number">81</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.221780</span> <span class="number">-1.170097</span>  <span class="number">0.876672</span>  <span class="number">0.552794</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-1.585317</span>  <span class="number">2.253459</span>  <span class="number">0.109537</span>  <span class="number">0.028095</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.035160</span>  <span class="number">0.143292</span>  <span class="number">0.139537</span> <span class="number">-0.823278</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-17</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-24</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span></div><div class="line"><span class="number">2017</span><span class="number">-05</span><span class="number">-01</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span>  <span class="number">1.000000</span></div><div class="line"></div><div class="line">In[<span class="number">82</span>]: pd.isnull(df3)</div><div class="line">Out[<span class="number">82</span>]: </div><div class="line"></div><div class="line">                A      B      C      D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="keyword">False</span>  <span class="keyword">False</span>  <span class="keyword">False</span>  <span class="keyword">False</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="keyword">False</span>  <span class="keyword">False</span>  <span class="keyword">False</span>  <span class="keyword">False</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="keyword">False</span>  <span class="keyword">False</span>  <span class="keyword">False</span>  <span class="keyword">False</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-17</span>   <span class="keyword">True</span>   <span class="keyword">True</span>   <span class="keyword">True</span>   <span class="keyword">True</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-24</span>   <span class="keyword">True</span>   <span class="keyword">True</span>   <span class="keyword">True</span>   <span class="keyword">True</span></div><div class="line"><span class="number">2017</span><span class="number">-05</span><span class="number">-01</span>   <span class="keyword">True</span>   <span class="keyword">True</span>   <span class="keyword">True</span>   <span class="keyword">True</span></div></pre></td></tr></table></figure>
<h2 id="5-Operations"><a href="#5-Operations" class="headerlink" title="5. Operations"></a>5. Operations</h2><h3 id="5-1-Stats"><a href="#5-1-Stats" class="headerlink" title="5.1 Stats"></a>5.1 Stats</h3><ol>
<li><p><strong>df.mean()</strong>：默认按照索引取均值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">83</span>]: df.mean(<span class="number">0</span>)</div><div class="line">Out[<span class="number">83</span>]: </div><div class="line"></div><div class="line">A   <span class="number">-0.235145</span></div><div class="line">B    <span class="number">0.292113</span></div><div class="line">C    <span class="number">0.239055</span></div><div class="line">D   <span class="number">-0.213740</span></div><div class="line">dtype: float64</div><div class="line">In[<span class="number">84</span>]: df.mean()</div><div class="line">Out[<span class="number">84</span>]: </div><div class="line"></div><div class="line">A   <span class="number">-0.235145</span></div><div class="line">B    <span class="number">0.292113</span></div><div class="line">C    <span class="number">0.239055</span></div><div class="line">D   <span class="number">-0.213740</span></div><div class="line">dtype: float64</div><div class="line">In[<span class="number">85</span>]: df.mean(<span class="number">1</span>)</div><div class="line">Out[<span class="number">85</span>]: </div><div class="line"></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>   <span class="number">-0.113125</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>    <span class="number">0.120287</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>    <span class="number">0.201443</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>   <span class="number">-0.126322</span></div><div class="line">Freq: W-MON, dtype: float64</div></pre></td></tr></table></figure>
</li>
<li><p><strong>df.sub 减法,df.add 加法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">112</span>]: df.sub(df[<span class="string">'A'</span>],axis=<span class="number">0</span>)</div><div class="line">Out[<span class="number">112</span>]: </div><div class="line"></div><div class="line">              A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.0</span> <span class="number">-0.446001</span> <span class="number">-0.557323</span> <span class="number">-1.000369</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.0</span> <span class="number">-1.391877</span>  <span class="number">0.654892</span>  <span class="number">0.331014</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span>  <span class="number">0.0</span>  <span class="number">3.838775</span>  <span class="number">1.694853</span>  <span class="number">1.613412</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.0</span>  <span class="number">0.108132</span>  <span class="number">0.104377</span> <span class="number">-0.858438</span></div><div class="line"></div><div class="line">In[<span class="number">113</span>]: df.add(df[<span class="string">'A'</span>],axis=<span class="number">0</span>)</div><div class="line">Out[<span class="number">113</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.775596</span>  <span class="number">0.329595</span>  <span class="number">0.218273</span> <span class="number">-0.224773</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.443560</span> <span class="number">-0.948317</span>  <span class="number">1.098452</span>  <span class="number">0.774574</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-3.170634</span>  <span class="number">0.668142</span> <span class="number">-1.475780</span> <span class="number">-1.557222</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span>  <span class="number">0.070320</span>  <span class="number">0.178452</span>  <span class="number">0.174697</span> <span class="number">-0.788119</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="5-2-Apply"><a href="#5-2-Apply" class="headerlink" title="5.2 Apply"></a>5.2 Apply</h3><p><strong>df.apply()</strong>：Applying functions to the data</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">90</span>]: df.apply(np.cumsum)</div><div class="line">Out[<span class="number">90</span>]: </div><div class="line"></div><div class="line">                   A         B         C         D</div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-20</span>  <span class="number">0.387798</span> <span class="number">-0.058203</span> <span class="number">-0.169525</span> <span class="number">-0.612571</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-27</span>  <span class="number">0.609578</span> <span class="number">-1.228301</span>  <span class="number">0.707147</span> <span class="number">-0.059777</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-03</span> <span class="number">-0.975739</span>  <span class="number">1.025158</span>  <span class="number">0.816683</span> <span class="number">-0.031682</span></div><div class="line"><span class="number">2017</span><span class="number">-04</span><span class="number">-10</span> <span class="number">-0.940579</span>  <span class="number">1.168450</span>  <span class="number">0.956220</span> <span class="number">-0.854961</span></div><div class="line"></div><div class="line">In[<span class="number">91</span>]: df.apply(<span class="keyword">lambda</span> x: x.max()-x.min())</div><div class="line">Out[<span class="number">91</span>]: </div><div class="line"></div><div class="line">A    <span class="number">1.973115</span></div><div class="line">B    <span class="number">3.423556</span></div><div class="line">C    <span class="number">1.046196</span></div><div class="line">D    <span class="number">1.376072</span></div><div class="line">dtype: float64</div></pre></td></tr></table></figure>
<h3 id="5-3-Histogramming"><a href="#5-3-Histogramming" class="headerlink" title="5.3 Histogramming"></a>5.3 Histogramming</h3><p><strong>value_counts()</strong> 计数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">114</span>]: s = pd.Series(np.random.randint(<span class="number">0</span>, <span class="number">7</span>, size=<span class="number">10</span>))</div><div class="line"></div><div class="line">In[<span class="number">115</span>]: s</div><div class="line">Out[<span class="number">115</span>]: </div><div class="line"></div><div class="line"><span class="number">0</span>    <span class="number">5</span></div><div class="line"><span class="number">1</span>    <span class="number">4</span></div><div class="line"><span class="number">2</span>    <span class="number">6</span></div><div class="line"><span class="number">3</span>    <span class="number">3</span></div><div class="line"><span class="number">4</span>    <span class="number">4</span></div><div class="line"><span class="number">5</span>    <span class="number">6</span></div><div class="line"><span class="number">6</span>    <span class="number">5</span></div><div class="line"><span class="number">7</span>    <span class="number">0</span></div><div class="line"><span class="number">8</span>    <span class="number">6</span></div><div class="line"><span class="number">9</span>    <span class="number">4</span></div><div class="line">dtype: int64</div><div class="line"></div><div class="line">In[<span class="number">117</span>]: s.value_counts()</div><div class="line">Out[<span class="number">117</span>]: </div><div class="line"></div><div class="line"><span class="number">6</span>    <span class="number">3</span></div><div class="line"><span class="number">4</span>    <span class="number">3</span></div><div class="line"><span class="number">5</span>    <span class="number">2</span></div><div class="line"><span class="number">3</span>    <span class="number">1</span></div><div class="line"><span class="number">0</span>    <span class="number">1</span></div><div class="line">dtype: int64</div></pre></td></tr></table></figure>
<h3 id="5-4-String-Methods"><a href="#5-4-String-Methods" class="headerlink" title="5.4 String Methods"></a>5.4 String Methods</h3><p><strong><a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.html?highlight=str#pandas.Series.str" target="_blank" rel="external">Series.str</a></strong>下面还有很多方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">118</span>]: s = pd.Series([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'Aaba'</span>, <span class="string">'Baca'</span>, np.nan, <span class="string">'CABA'</span>, <span class="string">'dog'</span>, <span class="string">'cat'</span>])</div><div class="line"></div><div class="line">In[<span class="number">121</span>]: s.str.upper()</div><div class="line">Out[<span class="number">121</span>]: </div><div class="line"></div><div class="line"><span class="number">0</span>       A</div><div class="line"><span class="number">1</span>       B</div><div class="line"><span class="number">2</span>       C</div><div class="line"><span class="number">3</span>    AABA</div><div class="line"><span class="number">4</span>    BACA</div><div class="line"><span class="number">5</span>     NaN</div><div class="line"><span class="number">6</span>    CABA</div><div class="line"><span class="number">7</span>     DOG</div><div class="line"><span class="number">8</span>     CAT</div><div class="line">dtype: object</div></pre></td></tr></table></figure>
<h2 id="6-Merge"><a href="#6-Merge" class="headerlink" title="6. Merge"></a>6. Merge</h2><h3 id="6-1-Concat"><a href="#6-1-Concat" class="headerlink" title="6.1 Concat"></a>6.1 Concat</h3><p>默认axis=0,按行拼接,axis=1,按列拼接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">123</span>]: df = pd.DataFrame(np.random.randn(<span class="number">6</span>,<span class="number">6</span>))</div><div class="line">In[<span class="number">124</span>]: df</div><div class="line">Out[<span class="number">124</span>]: </div><div class="line"></div><div class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span>         <span class="number">3</span>         <span class="number">4</span>         <span class="number">5</span></div><div class="line"><span class="number">0</span> <span class="number">-0.829274</span> <span class="number">-0.862832</span>  <span class="number">0.799663</span> <span class="number">-1.115011</span>  <span class="number">2.055959</span> <span class="number">-0.569186</span></div><div class="line"><span class="number">1</span>  <span class="number">0.058196</span> <span class="number">-0.571979</span>  <span class="number">0.124036</span>  <span class="number">1.777956</span> <span class="number">-1.192992</span> <span class="number">-1.427277</span></div><div class="line"><span class="number">2</span> <span class="number">-0.442932</span> <span class="number">-1.177776</span>  <span class="number">0.669681</span> <span class="number">-1.244613</span> <span class="number">-0.213186</span> <span class="number">-2.433752</span></div><div class="line"><span class="number">3</span>  <span class="number">1.305375</span> <span class="number">-0.540983</span> <span class="number">-0.232134</span> <span class="number">-0.373056</span> <span class="number">-0.036850</span> <span class="number">-0.171402</span></div><div class="line"><span class="number">4</span> <span class="number">-0.574777</span> <span class="number">-0.632868</span> <span class="number">-0.268940</span>  <span class="number">0.613305</span>  <span class="number">1.000270</span>  <span class="number">1.800234</span></div><div class="line"><span class="number">5</span>  <span class="number">0.874804</span> <span class="number">-1.711324</span> <span class="number">-0.240330</span> <span class="number">-0.183900</span>  <span class="number">0.154792</span> <span class="number">-1.423335</span></div><div class="line"></div><div class="line">In[<span class="number">126</span>]: pd.concat([df[:<span class="number">2</span>],df[<span class="number">3</span>:<span class="number">5</span>]])</div><div class="line">Out[<span class="number">126</span>]: </div><div class="line"></div><div class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">2</span>         <span class="number">3</span>         <span class="number">4</span>         <span class="number">5</span></div><div class="line"><span class="number">0</span> <span class="number">-0.829274</span> <span class="number">-0.862832</span>  <span class="number">0.799663</span> <span class="number">-1.115011</span>  <span class="number">2.055959</span> <span class="number">-0.569186</span></div><div class="line"><span class="number">1</span>  <span class="number">0.058196</span> <span class="number">-0.571979</span>  <span class="number">0.124036</span>  <span class="number">1.777956</span> <span class="number">-1.192992</span> <span class="number">-1.427277</span></div><div class="line"><span class="number">3</span>  <span class="number">1.305375</span> <span class="number">-0.540983</span> <span class="number">-0.232134</span> <span class="number">-0.373056</span> <span class="number">-0.036850</span> <span class="number">-0.171402</span></div><div class="line"><span class="number">4</span> <span class="number">-0.574777</span> <span class="number">-0.632868</span> <span class="number">-0.268940</span>  <span class="number">0.613305</span>  <span class="number">1.000270</span>  <span class="number">1.800234</span></div><div class="line">    </div><div class="line">In[<span class="number">131</span>]: pd.concat([df.iloc[:,<span class="number">0</span>:<span class="number">2</span>],df.iloc[:,<span class="number">3</span>:<span class="number">5</span>]],axis=<span class="number">1</span>)</div><div class="line">Out[<span class="number">131</span>]: </div><div class="line"></div><div class="line">          <span class="number">0</span>         <span class="number">1</span>         <span class="number">3</span>         <span class="number">4</span></div><div class="line"><span class="number">0</span> <span class="number">-0.829274</span> <span class="number">-0.862832</span> <span class="number">-1.115011</span>  <span class="number">2.055959</span></div><div class="line"><span class="number">1</span>  <span class="number">0.058196</span> <span class="number">-0.571979</span>  <span class="number">1.777956</span> <span class="number">-1.192992</span></div><div class="line"><span class="number">2</span> <span class="number">-0.442932</span> <span class="number">-1.177776</span> <span class="number">-1.244613</span> <span class="number">-0.213186</span></div><div class="line"><span class="number">3</span>  <span class="number">1.305375</span> <span class="number">-0.540983</span> <span class="number">-0.373056</span> <span class="number">-0.036850</span></div><div class="line"><span class="number">4</span> <span class="number">-0.574777</span> <span class="number">-0.632868</span>  <span class="number">0.613305</span>  <span class="number">1.000270</span></div><div class="line"><span class="number">5</span>  <span class="number">0.874804</span> <span class="number">-1.711324</span> <span class="number">-0.183900</span>  <span class="number">0.154792</span></div></pre></td></tr></table></figure>
<h3 id="6-2-Join"><a href="#6-2-Join" class="headerlink" title="6.2 Join"></a>6.2 Join</h3><h3 id="6-3-Append"><a href="#6-3-Append" class="headerlink" title="6.3 Append"></a>6.3 Append</h3><p>Append rows to a dataframe. See the <a href="http://pandas.pydata.org/pandas-docs/stable/merging.html#merging-concatenation" target="_blank" rel="external">Appending</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">132</span>]: df = pd.DataFrame(np.random.randn(<span class="number">8</span>, <span class="number">4</span>), columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</div><div class="line">In[<span class="number">133</span>]: df</div><div class="line">Out[<span class="number">133</span>]: </div><div class="line"></div><div class="line">          A         B         C         D</div><div class="line"><span class="number">0</span> <span class="number">-1.077744</span>  <span class="number">0.751278</span>  <span class="number">0.261896</span>  <span class="number">0.738191</span></div><div class="line"><span class="number">1</span>  <span class="number">0.865350</span> <span class="number">-1.652052</span>  <span class="number">0.090780</span> <span class="number">-0.022723</span></div><div class="line"><span class="number">2</span> <span class="number">-0.205837</span>  <span class="number">0.042363</span> <span class="number">-0.602793</span> <span class="number">-1.634198</span></div><div class="line"><span class="number">3</span> <span class="number">-0.232356</span> <span class="number">-0.905884</span> <span class="number">-0.495916</span>  <span class="number">0.865143</span></div><div class="line"><span class="number">4</span> <span class="number">-1.218397</span> <span class="number">-0.091938</span> <span class="number">-2.044627</span> <span class="number">-0.688541</span></div><div class="line"><span class="number">5</span>  <span class="number">0.735322</span> <span class="number">-0.331950</span> <span class="number">-1.392685</span> <span class="number">-1.059044</span></div><div class="line"><span class="number">6</span> <span class="number">-1.156664</span>  <span class="number">0.136152</span>  <span class="number">0.112945</span> <span class="number">-0.965557</span></div><div class="line"><span class="number">7</span>  <span class="number">0.050109</span>  <span class="number">0.071000</span> <span class="number">-1.793460</span>  <span class="number">0.071480</span></div><div class="line"></div><div class="line">In[<span class="number">135</span>]: df.append(df[<span class="number">3</span>:<span class="number">5</span>])</div><div class="line">Out[<span class="number">135</span>]: </div><div class="line"></div><div class="line">          A         B         C         D</div><div class="line"><span class="number">0</span> <span class="number">-1.077744</span>  <span class="number">0.751278</span>  <span class="number">0.261896</span>  <span class="number">0.738191</span></div><div class="line"><span class="number">1</span>  <span class="number">0.865350</span> <span class="number">-1.652052</span>  <span class="number">0.090780</span> <span class="number">-0.022723</span></div><div class="line"><span class="number">2</span> <span class="number">-0.205837</span>  <span class="number">0.042363</span> <span class="number">-0.602793</span> <span class="number">-1.634198</span></div><div class="line"><span class="number">3</span> <span class="number">-0.232356</span> <span class="number">-0.905884</span> <span class="number">-0.495916</span>  <span class="number">0.865143</span></div><div class="line"><span class="number">4</span> <span class="number">-1.218397</span> <span class="number">-0.091938</span> <span class="number">-2.044627</span> <span class="number">-0.688541</span></div><div class="line"><span class="number">5</span>  <span class="number">0.735322</span> <span class="number">-0.331950</span> <span class="number">-1.392685</span> <span class="number">-1.059044</span></div><div class="line"><span class="number">6</span> <span class="number">-1.156664</span>  <span class="number">0.136152</span>  <span class="number">0.112945</span> <span class="number">-0.965557</span></div><div class="line"><span class="number">7</span>  <span class="number">0.050109</span>  <span class="number">0.071000</span> <span class="number">-1.793460</span>  <span class="number">0.071480</span></div><div class="line"><span class="number">3</span> <span class="number">-0.232356</span> <span class="number">-0.905884</span> <span class="number">-0.495916</span>  <span class="number">0.865143</span></div><div class="line"><span class="number">4</span> <span class="number">-1.218397</span> <span class="number">-0.091938</span> <span class="number">-2.044627</span> <span class="number">-0.688541</span></div><div class="line"></div><div class="line">In[<span class="number">136</span>]: df.append(df[<span class="number">3</span>:<span class="number">5</span>], ignore_index=<span class="keyword">True</span>)</div><div class="line">Out[<span class="number">136</span>]: </div><div class="line"></div><div class="line">          A         B         C         D</div><div class="line"><span class="number">0</span> <span class="number">-1.077744</span>  <span class="number">0.751278</span>  <span class="number">0.261896</span>  <span class="number">0.738191</span></div><div class="line"><span class="number">1</span>  <span class="number">0.865350</span> <span class="number">-1.652052</span>  <span class="number">0.090780</span> <span class="number">-0.022723</span></div><div class="line"><span class="number">2</span> <span class="number">-0.205837</span>  <span class="number">0.042363</span> <span class="number">-0.602793</span> <span class="number">-1.634198</span></div><div class="line"><span class="number">3</span> <span class="number">-0.232356</span> <span class="number">-0.905884</span> <span class="number">-0.495916</span>  <span class="number">0.865143</span></div><div class="line"><span class="number">4</span> <span class="number">-1.218397</span> <span class="number">-0.091938</span> <span class="number">-2.044627</span> <span class="number">-0.688541</span></div><div class="line"><span class="number">5</span>  <span class="number">0.735322</span> <span class="number">-0.331950</span> <span class="number">-1.392685</span> <span class="number">-1.059044</span></div><div class="line"><span class="number">6</span> <span class="number">-1.156664</span>  <span class="number">0.136152</span>  <span class="number">0.112945</span> <span class="number">-0.965557</span></div><div class="line"><span class="number">7</span>  <span class="number">0.050109</span>  <span class="number">0.071000</span> <span class="number">-1.793460</span>  <span class="number">0.071480</span></div><div class="line"><span class="number">8</span> <span class="number">-0.232356</span> <span class="number">-0.905884</span> <span class="number">-0.495916</span>  <span class="number">0.865143</span></div><div class="line"><span class="number">9</span> <span class="number">-1.218397</span> <span class="number">-0.091938</span> <span class="number">-2.044627</span> <span class="number">-0.688541</span></div></pre></td></tr></table></figure>
<h3 id="6-4-Grouping"><a href="#6-4-Grouping" class="headerlink" title="6.4 Grouping"></a>6.4 Grouping</h3><p><strong>df.groupby(by=)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">137</span>]: df = pd.DataFrame(&#123;<span class="string">'A'</span> : [<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>,</div><div class="line">   ....:                           <span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'foo'</span>, <span class="string">'foo'</span>],</div><div class="line">   ....:                    <span class="string">'B'</span> : [<span class="string">'one'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>,</div><div class="line">   ....:                           <span class="string">'two'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'three'</span>],</div><div class="line">   ....:                    <span class="string">'C'</span> : np.random.randn(<span class="number">8</span>),</div><div class="line">   ....:                    <span class="string">'D'</span> : np.random.randn(<span class="number">8</span>)&#125;)</div><div class="line">In[<span class="number">138</span>]: df</div><div class="line">Out[<span class="number">138</span>]: </div><div class="line"></div><div class="line">     A      B         C         D</div><div class="line"><span class="number">0</span>  foo    one <span class="number">-1.378873</span> <span class="number">-1.289674</span></div><div class="line"><span class="number">1</span>  bar    one <span class="number">-0.800759</span>  <span class="number">1.247083</span></div><div class="line"><span class="number">2</span>  foo    two <span class="number">-1.172841</span>  <span class="number">0.605887</span></div><div class="line"><span class="number">3</span>  bar  three <span class="number">-0.232046</span>  <span class="number">0.328599</span></div><div class="line"><span class="number">4</span>  foo    two <span class="number">-0.027785</span>  <span class="number">1.644086</span></div><div class="line"><span class="number">5</span>  bar    two <span class="number">-0.456277</span> <span class="number">-1.737294</span></div><div class="line"><span class="number">6</span>  foo    one <span class="number">-0.092326</span> <span class="number">-0.424813</span></div><div class="line"><span class="number">7</span>  foo  three  <span class="number">0.676421</span> <span class="number">-0.328490</span></div><div class="line"></div><div class="line">In[<span class="number">140</span>]: df.groupby(by=<span class="string">'A'</span>).sum()</div><div class="line">Out[<span class="number">140</span>]: </div><div class="line"></div><div class="line">            C         D</div><div class="line">A                      </div><div class="line">bar <span class="number">-1.489081</span> <span class="number">-0.161612</span></div><div class="line">foo <span class="number">-1.995404</span>  <span class="number">0.206996</span></div><div class="line">In[<span class="number">141</span>]: df.groupby(by=[<span class="string">'A'</span>, <span class="string">'B'</span>]).sum()</div><div class="line">Out[<span class="number">141</span>]: </div><div class="line"></div><div class="line">                  C         D</div><div class="line">A   B                        </div><div class="line">bar one   <span class="number">-0.800759</span>  <span class="number">1.247083</span></div><div class="line">    three <span class="number">-0.232046</span>  <span class="number">0.328599</span></div><div class="line">    two   <span class="number">-0.456277</span> <span class="number">-1.737294</span></div><div class="line">foo one   <span class="number">-1.471198</span> <span class="number">-1.714486</span></div><div class="line">    three  <span class="number">0.676421</span> <span class="number">-0.328490</span></div><div class="line">    two   <span class="number">-1.200627</span>  <span class="number">2.249972</span></div></pre></td></tr></table></figure>
<h3 id="6-5-Reshaping"><a href="#6-5-Reshaping" class="headerlink" title="6.5 Reshaping"></a>6.5 Reshaping</h3><ol>
<li><p><strong>Stack</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line">tuples = list(zip(*[[<span class="string">'bar'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span>, <span class="string">'baz'</span>,</div><div class="line">   ....:                      <span class="string">'foo'</span>, <span class="string">'foo'</span>, <span class="string">'qux'</span>, <span class="string">'qux'</span>],</div><div class="line">   ....:                     [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>,</div><div class="line">   ....:                      <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>]]))</div><div class="line"></div><div class="line">tuples</div><div class="line">Out[<span class="number">27</span>]: </div><div class="line">[(<span class="string">'bar'</span>, <span class="string">'one'</span>),</div><div class="line"> (<span class="string">'bar'</span>, <span class="string">'two'</span>),</div><div class="line"> (<span class="string">'baz'</span>, <span class="string">'one'</span>),</div><div class="line"> (<span class="string">'baz'</span>, <span class="string">'two'</span>),</div><div class="line"> (<span class="string">'foo'</span>, <span class="string">'one'</span>),</div><div class="line"> (<span class="string">'foo'</span>, <span class="string">'two'</span>),</div><div class="line"> (<span class="string">'qux'</span>, <span class="string">'one'</span>),</div><div class="line"> (<span class="string">'qux'</span>, <span class="string">'two'</span>)]</div><div class="line"></div><div class="line">index = pd.MultiIndex.from_tuples(tuples, names=[<span class="string">'first'</span>, <span class="string">'second'</span>])</div><div class="line"></div><div class="line">index</div><div class="line">Out[<span class="number">29</span>]: </div><div class="line">MultiIndex(levels=[[<span class="string">'bar'</span>, <span class="string">'baz'</span>, <span class="string">'foo'</span>, <span class="string">'qux'</span>], [<span class="string">'one'</span>, <span class="string">'two'</span>]],</div><div class="line">           labels=[[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]],</div><div class="line">           names=[<span class="string">'first'</span>, <span class="string">'second'</span>])</div><div class="line"></div><div class="line">df = pd.DataFrame(np.random.randn(<span class="number">8</span>, <span class="number">2</span>), index=index, columns=[<span class="string">'A'</span>, <span class="string">'B'</span>])</div><div class="line"></div><div class="line">df</div><div class="line">Out[<span class="number">31</span>]: </div><div class="line">                     A         B</div><div class="line">first second                    </div><div class="line">bar   one     <span class="number">0.398046</span>  <span class="number">0.488732</span></div><div class="line">      two    <span class="number">-0.024753</span> <span class="number">-0.567505</span></div><div class="line">baz   one    <span class="number">-0.509408</span>  <span class="number">0.055228</span></div><div class="line">      two     <span class="number">0.936854</span>  <span class="number">0.326829</span></div><div class="line">foo   one     <span class="number">0.390471</span>  <span class="number">0.540038</span></div><div class="line">      two    <span class="number">-1.001224</span>  <span class="number">0.858414</span></div><div class="line">qux   one    <span class="number">-1.640981</span>  <span class="number">0.103979</span></div><div class="line">      two    <span class="number">-0.167781</span>  <span class="number">0.949106</span></div><div class="line"></div><div class="line">df[:<span class="number">4</span>]</div><div class="line">Out[<span class="number">32</span>]: </div><div class="line">                     A         B</div><div class="line">first second                    </div><div class="line">bar   one     <span class="number">0.398046</span>  <span class="number">0.488732</span></div><div class="line">      two    <span class="number">-0.024753</span> <span class="number">-0.567505</span></div><div class="line">baz   one    <span class="number">-0.509408</span>  <span class="number">0.055228</span></div><div class="line">      two     <span class="number">0.936854</span>  <span class="number">0.326829</span></div><div class="line"></div><div class="line">stacked = df2.stack()</div><div class="line"></div><div class="line">stacked</div><div class="line">Out[<span class="number">34</span>]: </div><div class="line">first  second   </div><div class="line">bar    one     A   <span class="number">-1.131337</span></div><div class="line">               B    <span class="number">0.734982</span></div><div class="line">       two     A    <span class="number">0.008166</span></div><div class="line">               B   <span class="number">-1.358364</span></div><div class="line">baz    one     A   <span class="number">-1.578985</span></div><div class="line">               B    <span class="number">0.399612</span></div><div class="line">       two     A    <span class="number">1.697060</span></div><div class="line">               B    <span class="number">0.830027</span></div><div class="line">dtype: float64</div><div class="line">    </div><div class="line">stacked.unstack()</div><div class="line">Out[<span class="number">35</span>]: </div><div class="line">                     A         B</div><div class="line">first second                    </div><div class="line">bar   one    <span class="number">-1.131337</span>  <span class="number">0.734982</span></div><div class="line">      two     <span class="number">0.008166</span> <span class="number">-1.358364</span></div><div class="line">baz   one    <span class="number">-1.578985</span>  <span class="number">0.399612</span></div><div class="line">      two     <span class="number">1.697060</span>  <span class="number">0.830027</span></div><div class="line"></div><div class="line">stacked.unstack().unstack()</div><div class="line">Out[<span class="number">36</span>]: </div><div class="line">               A                   B          </div><div class="line">second       one       two       one       two</div><div class="line">first                                         </div><div class="line">bar    <span class="number">-1.131337</span>  <span class="number">0.008166</span>  <span class="number">0.734982</span> <span class="number">-1.358364</span></div><div class="line">baz    <span class="number">-1.578985</span>  <span class="number">1.697060</span>  <span class="number">0.399612</span>  <span class="number">0.830027</span></div><div class="line"></div><div class="line">stacked.unstack(<span class="number">1</span>)</div><div class="line">Out[<span class="number">37</span>]: </div><div class="line">second        one       two</div><div class="line">first                      </div><div class="line">bar   A <span class="number">-1.131337</span>  <span class="number">0.008166</span></div><div class="line">      B  <span class="number">0.734982</span> <span class="number">-1.358364</span></div><div class="line">baz   A <span class="number">-1.578985</span>  <span class="number">1.697060</span></div><div class="line">      B  <span class="number">0.399612</span>  <span class="number">0.830027</span></div><div class="line"></div><div class="line">stacked.unstack(<span class="number">0</span>)</div><div class="line">Out[<span class="number">38</span>]: </div><div class="line">first          bar       baz</div><div class="line">second                      </div><div class="line">one    A <span class="number">-1.131337</span> <span class="number">-1.578985</span></div><div class="line">       B  <span class="number">0.734982</span>  <span class="number">0.399612</span></div><div class="line">two    A  <span class="number">0.008166</span>  <span class="number">1.697060</span></div><div class="line">       B <span class="number">-1.358364</span>  <span class="number">0.830027</span></div><div class="line"></div><div class="line">stacked.unstack(<span class="number">2</span>)</div><div class="line">Out[<span class="number">39</span>]: </div><div class="line">                     A         B</div><div class="line">first second                    </div><div class="line">bar   one    <span class="number">-1.131337</span>  <span class="number">0.734982</span></div><div class="line">      two     <span class="number">0.008166</span> <span class="number">-1.358364</span></div><div class="line">baz   one    <span class="number">-1.578985</span>  <span class="number">0.399612</span></div><div class="line">      two     <span class="number">1.697060</span>  <span class="number">0.830027</span></div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="6-6-Time-Series"><a href="#6-6-Time-Series" class="headerlink" title="6.6 Time Series"></a>6.6 Time Series</h3><ol>
<li><p><strong>resample</strong>：对时间序列做类似于groupby的操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">163</span>]: rng = pd.date_range(<span class="string">'1/1/2012'</span>, periods=<span class="number">10</span>, freq=<span class="string">'S'</span>)</div><div class="line">In[<span class="number">164</span>]: ts = pd.Series(np.random.randn(<span class="number">10</span>), index=rng)</div><div class="line">In[<span class="number">165</span>]: ts</div><div class="line">Out[<span class="number">165</span>]: </div><div class="line"></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>    <span class="number">0.924984</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">01</span>   <span class="number">-1.253491</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">02</span>   <span class="number">-0.417912</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">03</span>   <span class="number">-0.104731</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">04</span>   <span class="number">-1.165980</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">05</span>   <span class="number">-0.535897</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">06</span>   <span class="number">-0.937104</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">07</span>   <span class="number">-0.143732</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">08</span>   <span class="number">-0.292696</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">09</span>   <span class="number">-0.700354</span></div><div class="line">Freq: S, dtype: float64</div><div class="line">In[<span class="number">166</span>]: ts.resample(<span class="string">'2S'</span>).sum()</div><div class="line">Out[<span class="number">166</span>]: </div><div class="line"></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>   <span class="number">-0.328507</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">02</span>   <span class="number">-0.522643</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">04</span>   <span class="number">-1.701877</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">06</span>   <span class="number">-1.080836</span></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">08</span>   <span class="number">-0.993050</span></div><div class="line">Freq: <span class="number">2</span>S, dtype: float64</div></pre></td></tr></table></figure>
</li>
<li><p><strong>to_period,to_timestamp</strong>：Timestamped data can be converted to PeriodIndex-ed data using <code>to_period</code> and vice-versa using <code>to_timestamp</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">167</span>]: rng = pd.date_range(<span class="string">'1/1/2012'</span>, periods=<span class="number">5</span>, freq=<span class="string">'M'</span>)</div><div class="line"></div><div class="line">In[<span class="number">168</span>]: ts = pd.Series(np.random.randn(len(rng)), index=rng)</div><div class="line">In[<span class="number">169</span>]: ts</div><div class="line">Out[<span class="number">169</span>]: </div><div class="line"></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-31</span>   <span class="number">-0.174429</span></div><div class="line"><span class="number">2012</span><span class="number">-02</span><span class="number">-29</span>    <span class="number">2.073488</span></div><div class="line"><span class="number">2012</span><span class="number">-03</span><span class="number">-31</span>    <span class="number">1.459442</span></div><div class="line"><span class="number">2012</span><span class="number">-04</span><span class="number">-30</span>    <span class="number">0.703198</span></div><div class="line"><span class="number">2012</span><span class="number">-05</span><span class="number">-31</span>   <span class="number">-1.796758</span></div><div class="line">Freq: M, dtype: float64</div><div class="line">In[<span class="number">175</span>]: ps = ts.to_period()</div><div class="line">In[<span class="number">176</span>]: ps</div><div class="line">Out[<span class="number">176</span>]: </div><div class="line"></div><div class="line"><span class="number">2012</span><span class="number">-01</span>   <span class="number">-0.174429</span></div><div class="line"><span class="number">2012</span><span class="number">-02</span>    <span class="number">2.073488</span></div><div class="line"><span class="number">2012</span><span class="number">-03</span>    <span class="number">1.459442</span></div><div class="line"><span class="number">2012</span><span class="number">-04</span>    <span class="number">0.703198</span></div><div class="line"><span class="number">2012</span><span class="number">-05</span>   <span class="number">-1.796758</span></div><div class="line">Freq: M, dtype: float64</div><div class="line">        </div><div class="line">In[<span class="number">177</span>]: ps.to_timestamp()</div><div class="line">Out[<span class="number">177</span>]: </div><div class="line"></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-01</span>   <span class="number">-0.174429</span></div><div class="line"><span class="number">2012</span><span class="number">-02</span><span class="number">-01</span>    <span class="number">2.073488</span></div><div class="line"><span class="number">2012</span><span class="number">-03</span><span class="number">-01</span>    <span class="number">1.459442</span></div><div class="line"><span class="number">2012</span><span class="number">-04</span><span class="number">-01</span>    <span class="number">0.703198</span></div><div class="line"><span class="number">2012</span><span class="number">-05</span><span class="number">-01</span>   <span class="number">-1.796758</span></div><div class="line">Freq: MS, dtype: float64</div><div class="line"><span class="comment"># Remember that ‘s’ and ‘e’ can be used to return the timestamps at the start or end of the period:</span></div><div class="line">In[<span class="number">179</span>]: ps.to_timestamp(<span class="string">'D'</span>, <span class="string">'e'</span>)</div><div class="line">Out[<span class="number">179</span>]: </div><div class="line"></div><div class="line"><span class="number">2012</span><span class="number">-01</span><span class="number">-31</span>   <span class="number">-0.174429</span></div><div class="line"><span class="number">2012</span><span class="number">-02</span><span class="number">-29</span>    <span class="number">2.073488</span></div><div class="line"><span class="number">2012</span><span class="number">-03</span><span class="number">-31</span>    <span class="number">1.459442</span></div><div class="line"><span class="number">2012</span><span class="number">-04</span><span class="number">-30</span>    <span class="number">0.703198</span></div><div class="line"><span class="number">2012</span><span class="number">-05</span><span class="number">-31</span>   <span class="number">-1.796758</span></div><div class="line">Freq: M, dtype: float64</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="7-Getting-Data-In-Out"><a href="#7-Getting-Data-In-Out" class="headerlink" title="7. Getting Data In/Out"></a>7. Getting Data In/Out</h2><h3 id="7-1-CSV"><a href="#7-1-CSV" class="headerlink" title="7.1 CSV"></a>7.1 CSV</h3><p><strong>df.to_csv()</strong></p>
<p><strong>pd.read_csv()</strong></p>
<h3 id="7-2-Json"><a href="#7-2-Json" class="headerlink" title="7.2 Json"></a>7.2 Json</h3><p><strong>to_json</strong></p>
<p><strong>read_json</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">In[<span class="number">181</span>]: dfj = pd.DataFrame(np.random.randn(<span class="number">5</span>, <span class="number">2</span>), columns=list(<span class="string">'AB'</span>))</div><div class="line">In[<span class="number">182</span>]: dfj</div><div class="line">Out[<span class="number">182</span>]: </div><div class="line"></div><div class="line">          A         B</div><div class="line"><span class="number">0</span> <span class="number">-0.570906</span> <span class="number">-1.082939</span></div><div class="line"><span class="number">1</span> <span class="number">-0.181702</span>  <span class="number">0.512260</span></div><div class="line"><span class="number">2</span>  <span class="number">0.267922</span> <span class="number">-0.495724</span></div><div class="line"><span class="number">3</span>  <span class="number">1.182305</span>  <span class="number">0.792193</span></div><div class="line"><span class="number">4</span> <span class="number">-0.238487</span> <span class="number">-0.293700</span></div><div class="line"></div><div class="line">In[<span class="number">184</span>]: json = dfj.to_json()</div><div class="line">In[<span class="number">185</span>]: json</div><div class="line">Out[<span class="number">185</span>]: </div><div class="line"><span class="string">'&#123;"A":&#123;"0":-0.570906023,"1":-0.1817023093,"2":0.267921959,"3":1.1823048088,"4":-0.2384873419&#125;,"B":&#123;"0":-1.082939276,"1":0.5122603476,"2":-0.495723635,"3":0.7921934348,"4":-0.2936996606&#125;&#125;'</span></div><div class="line"></div><div class="line">In[<span class="number">186</span>]: pd.read_json(json)</div><div class="line">Out[<span class="number">186</span>]: </div><div class="line"></div><div class="line">          A         B</div><div class="line"><span class="number">0</span> <span class="number">-0.570906</span> <span class="number">-1.082939</span></div><div class="line"><span class="number">1</span> <span class="number">-0.181702</span>  <span class="number">0.512260</span></div><div class="line"><span class="number">2</span>  <span class="number">0.267922</span> <span class="number">-0.495724</span></div><div class="line"><span class="number">3</span>  <span class="number">1.182305</span>  <span class="number">0.792193</span></div><div class="line"><span class="number">4</span> <span class="number">-0.238487</span> <span class="number">-0.293700</span></div></pre></td></tr></table></figure>
<h3 id="7-3-Excel"><a href="#7-3-Excel" class="headerlink" title="7.3 Excel"></a>7.3 Excel</h3><p><strong>df.to_excel</strong></p>
<p><strong>pd.read_excel</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">In [<span class="number">145</span>]: df.to_excel(<span class="string">'foo.xlsx'</span>, sheet_name=<span class="string">'Sheet1'</span>)</div><div class="line"></div><div class="line">In [<span class="number">146</span>]: pd.read_excel(<span class="string">'foo.xlsx'</span>, <span class="string">'Sheet1'</span>, index_col=<span class="keyword">None</span>, na_values=[<span class="string">'NA'</span>])</div><div class="line">Out[<span class="number">146</span>]: </div><div class="line">                    A          B         C          D</div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-01</span>   <span class="number">0.266457</span>  <span class="number">-0.399641</span> <span class="number">-0.219582</span>   <span class="number">1.186860</span></div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-02</span>  <span class="number">-1.170732</span>  <span class="number">-0.345873</span>  <span class="number">1.653061</span>  <span class="number">-0.282953</span></div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-03</span>  <span class="number">-1.734933</span>   <span class="number">0.530468</span>  <span class="number">2.060811</span>  <span class="number">-0.515536</span></div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-04</span>  <span class="number">-1.555121</span>   <span class="number">1.452620</span>  <span class="number">0.239859</span>  <span class="number">-1.156896</span></div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-05</span>   <span class="number">0.578117</span>   <span class="number">0.511371</span>  <span class="number">0.103552</span>  <span class="number">-2.428202</span></div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-06</span>   <span class="number">0.478344</span>   <span class="number">0.449933</span> <span class="number">-0.741620</span>  <span class="number">-1.962409</span></div><div class="line"><span class="number">2000</span><span class="number">-01</span><span class="number">-07</span>   <span class="number">1.235339</span>  <span class="number">-0.091757</span> <span class="number">-1.543861</span>  <span class="number">-1.084753</span></div><div class="line"><span class="meta">... </span>              ...        ...       ...        ...</div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-20</span> <span class="number">-10.628548</span>  <span class="number">-9.153563</span> <span class="number">-7.883146</span>  <span class="number">28.313940</span></div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-21</span> <span class="number">-10.390377</span>  <span class="number">-8.727491</span> <span class="number">-6.399645</span>  <span class="number">30.914107</span></div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-22</span>  <span class="number">-8.985362</span>  <span class="number">-8.485624</span> <span class="number">-4.669462</span>  <span class="number">31.367740</span></div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-23</span>  <span class="number">-9.558560</span>  <span class="number">-8.781216</span> <span class="number">-4.499815</span>  <span class="number">30.518439</span></div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-24</span>  <span class="number">-9.902058</span>  <span class="number">-9.340490</span> <span class="number">-4.386639</span>  <span class="number">30.105593</span></div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-25</span> <span class="number">-10.216020</span>  <span class="number">-9.480682</span> <span class="number">-3.933802</span>  <span class="number">29.758560</span></div><div class="line"><span class="number">2002</span><span class="number">-09</span><span class="number">-26</span> <span class="number">-11.856774</span> <span class="number">-10.671012</span> <span class="number">-3.216025</span>  <span class="number">29.369368</span></div><div class="line"></div><div class="line">[<span class="number">1000</span> rows x <span class="number">4</span> columns]</div></pre></td></tr></table></figure>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/mimizhang" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2017 mimizhang<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>